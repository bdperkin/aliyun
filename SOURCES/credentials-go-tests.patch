From 54f2012f2ee36d9eed1c7aad150a4d206109a5e0 Mon Sep 17 00:00:00 2001
From: wb-wzc505509 <wb-wzc505509@alibaba-inc.com>
Date: Thu, 30 Jul 2020 20:39:54 +0800
Subject: [PATCH] update test

---
 .appveyor.yml                        | 2 ++
 .travis.yml                          | 2 ++
 credentials/credential_test.go       | 2 +-
 credentials/profile_provider_test.go | 4 ++--
 go.mod                               | 2 ++
 5 files changed, 9 insertions(+), 3 deletions(-)

diff --git a/.appveyor.yml b/.appveyor.yml
index 2021f9f..147cfde 100644
--- a/.appveyor.yml
+++ b/.appveyor.yml
@@ -6,6 +6,8 @@ environment:
   GOPATH: c:\gopath
   matrix:
     - go: 1.12.x
+    - go: 1.13.x
+    - go: 1.14.x
 
 platform:
   - x64
diff --git a/.travis.yml b/.travis.yml
index ab2c52e..e4d4147 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -2,6 +2,8 @@ language: go
 
 go:
   - 1.12.x
+  - 1.13.x
+  - 1.14.x
 
 branches: # build only on these branches
   only:
diff --git a/credentials/credential_test.go b/credentials/credential_test.go
index 73cb073..a7fc02f 100644
--- a/credentials/credential_test.go
+++ b/credentials/credential_test.go
@@ -179,7 +179,7 @@ func Test_doaction(t *testing.T) {
 		Proxy: "# #%gfdf",
 	}
 	content, err = doAction(request, runtime)
-	assert.Equal(t, `parse # #%gfdf: invalid URL escape "%gf"`, err.Error())
+	assert.Contains(t, err.Error(), `invalid URL escape`)
 	assert.NotNil(t, err)
 	assert.Nil(t, content)
 }
diff --git a/credentials/profile_provider_test.go b/credentials/profile_provider_test.go
index 7f5a044..00e603d 100644
--- a/credentials/profile_provider_test.go
+++ b/credentials/profile_provider_test.go
@@ -295,13 +295,13 @@ func TestProfileProvider(t *testing.T) {
 	p = newProfileProvider("NonExist")
 	c, err = p.resolve()
 	assert.Nil(t, c)
-	assert.Equal(t, "ERROR: Can not load section section \"NonExist\" does not exist", err.Error())
+	assert.Contains(t, err.Error(), "ERROR: Can not load section section", "does not exist")
 
 	// testcase 6, credential type does not set
 	p = newProfileProvider("notype")
 	c, err = p.resolve()
 	assert.Nil(t, c)
-	assert.Equal(t, "Missing required type option error when getting key of section \"notype\": key \"type\" not exists", err.Error())
+	assert.Contains(t, err.Error(), "Missing required type option error when getting key of section", "not exists")
 
 	// testcase 7, normal AK
 	p = newProfileProvider()
diff --git a/go.mod b/go.mod
index 8ab38a5..6424d85 100644
--- a/go.mod
+++ b/go.mod
@@ -1,5 +1,7 @@
 module github.com/aliyun/credentials-go
 
+go 1.14
+
 require (
 	github.com/alibabacloud-go/debug v0.0.0-20190504072949-9472017b5c68
 	github.com/alibabacloud-go/tea v1.1.0
