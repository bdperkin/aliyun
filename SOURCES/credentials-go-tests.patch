From ddf7587bd9b46e8a2f615503023106acba0c3ff6 Mon Sep 17 00:00:00 2001
From: Brandon Perkins <bperkins@redhat.com>
Date: Wed, 29 Jul 2020 15:27:42 -0400
Subject: [PATCH 1/2] Fixes in tests for go 1.14.

---
 credentials/credential_test.go       | 2 +-
 credentials/profile_provider_test.go | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/credentials/credential_test.go b/credentials/credential_test.go
index 73cb073..248358b 100644
--- a/credentials/credential_test.go
+++ b/credentials/credential_test.go
@@ -179,7 +179,7 @@ func Test_doaction(t *testing.T) {
 		Proxy: "# #%gfdf",
 	}
 	content, err = doAction(request, runtime)
-	assert.Equal(t, `parse # #%gfdf: invalid URL escape "%gf"`, err.Error())
+	assert.Equal(t, `parse "# #%gfdf": invalid URL escape "%gf"`, err.Error())
 	assert.NotNil(t, err)
 	assert.Nil(t, content)
 }
diff --git a/credentials/profile_provider_test.go b/credentials/profile_provider_test.go
index 7f5a044..9d4cf28 100644
--- a/credentials/profile_provider_test.go
+++ b/credentials/profile_provider_test.go
@@ -295,13 +295,13 @@ func TestProfileProvider(t *testing.T) {
 	p = newProfileProvider("NonExist")
 	c, err = p.resolve()
 	assert.Nil(t, c)
-	assert.Equal(t, "ERROR: Can not load section section \"NonExist\" does not exist", err.Error())
+	assert.Equal(t, "ERROR: Can not load section section 'NonExist' does not exist", err.Error())
 
 	// testcase 6, credential type does not set
 	p = newProfileProvider("notype")
 	c, err = p.resolve()
 	assert.Nil(t, c)
-	assert.Equal(t, "Missing required type option error when getting key of section \"notype\": key \"type\" not exists", err.Error())
+	assert.Equal(t, "Missing required type option error when getting key of section 'notype': key 'type' not exists", err.Error())
 
 	// testcase 7, normal AK
 	p = newProfileProvider()

From 7cc1122a6e1ff927f8fa91232842b204bbb43323 Mon Sep 17 00:00:00 2001
From: Brandon Perkins <bperkins@redhat.com>
Date: Thu, 30 Jul 2020 14:40:28 -0400
Subject: [PATCH 2/2] Apply fixes from
 https://github.com/aliyun/credentials-go/pull/23

---
 .appveyor.yml                  | 2 ++
 .travis.yml                    | 2 ++
 credentials/credential_test.go | 2 +-
 go.mod                         | 2 ++
 4 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/.appveyor.yml b/.appveyor.yml
index 2021f9f..147cfde 100644
--- a/.appveyor.yml
+++ b/.appveyor.yml
@@ -6,6 +6,8 @@ environment:
   GOPATH: c:\gopath
   matrix:
     - go: 1.12.x
+    - go: 1.13.x
+    - go: 1.14.x
 
 platform:
   - x64
diff --git a/.travis.yml b/.travis.yml
index ab2c52e..e4d4147 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -2,6 +2,8 @@ language: go
 
 go:
   - 1.12.x
+  - 1.13.x
+  - 1.14.x
 
 branches: # build only on these branches
   only:
diff --git a/credentials/credential_test.go b/credentials/credential_test.go
index 248358b..a7fc02f 100644
--- a/credentials/credential_test.go
+++ b/credentials/credential_test.go
@@ -179,7 +179,7 @@ func Test_doaction(t *testing.T) {
 		Proxy: "# #%gfdf",
 	}
 	content, err = doAction(request, runtime)
-	assert.Equal(t, `parse "# #%gfdf": invalid URL escape "%gf"`, err.Error())
+	assert.Contains(t, err.Error(), `invalid URL escape`)
 	assert.NotNil(t, err)
 	assert.Nil(t, content)
 }
diff --git a/go.mod b/go.mod
index 8ab38a5..6424d85 100644
--- a/go.mod
+++ b/go.mod
@@ -1,5 +1,7 @@
 module github.com/aliyun/credentials-go
 
+go 1.14
+
 require (
 	github.com/alibabacloud-go/debug v0.0.0-20190504072949-9472017b5c68
 	github.com/alibabacloud-go/tea v1.1.0
